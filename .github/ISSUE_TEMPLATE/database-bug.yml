name: 'üóÑÔ∏è Bug - Database'
description: Problema con base de datos, TypeORM o migraciones
labels: ['database', 'typeorm', 'mysql', 'backend', 'type: bug', 'status: backlog', 'priority: planning']
body:
  - type: markdown
    attributes:
      value: |
        Reporta problemas de MySQL, TypeORM o migraciones. ¬°Solo lo esencial!

  - type: dropdown
    id: database-category
    attributes:
      label: Tipo de problema
      options:
        - Migration
        - TypeORM Entity/Query
        - Query Performance
        - Connection
        - Schema/Constraints
        - Other
    validations:
      required: true

  - type: textarea
    id: problem-description
    attributes:
      label: ¬øQu√© est√° fallando?
      description: Describe el problema brevemente
      placeholder: |
        La migraci√≥n CreateUsers falla por constraint de foreign key
    validations:
      required: true

  - type: textarea
    id: error-code
    attributes:
      label: Error o c√≥digo relevante (opcional)
      description: Pega el error o c√≥digo relacionado
      placeholder: |
        ```
        QueryFailedError: ER_CANNOT_ADD_FOREIGN
        ```

        O c√≥digo de entidad/migraci√≥n problem√°tica
    validations:
      required: false

  - type: textarea
    id: sql-query
    attributes:
      label: Query SQL problem√°tica (si aplica)
      description: |
        La consulta SQL que est√° causando el problema
      placeholder: |
        ```sql
        SELECT u.*, p.title 
        FROM users u 
        LEFT JOIN posts p ON u.id = p.user_id 
        WHERE u.active = 1 
        GROUP BY u.id;
        ```
    validations:
      required: false

  - type: textarea
    id: database-schema
    attributes:
      label: Esquema de base de datos relevante
      description: |
        SHOW CREATE TABLE o descripci√≥n del esquema actual
      placeholder: |
        ```sql
        CREATE TABLE `users` (
          `id` int NOT NULL AUTO_INCREMENT,
          `email` varchar(255) NOT NULL,
          `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
          PRIMARY KEY (`id`),
          UNIQUE KEY `email` (`email`)
        );
        ```
    validations:
      required: false

  - type: textarea
    id: database-environment
    attributes:
      label: Informaci√≥n del entorno de base de datos
      description: |
        Detalles t√©cnicos del entorno de MySQL
      value: |
        - **MySQL version:** 
        - **TypeORM version:** 
        - **Environment:** (development/production)
        - **Database name:** 
        - **Character set:** 
        - **Storage engine:**
      placeholder: Completa la informaci√≥n del entorno
    validations:
      required: true

  - type: textarea
    id: steps-to-reproduce
    attributes:
      label: Pasos para reproducir
      description: |
        ¬øC√≥mo podemos reproducir este problema de base de datos?
      placeholder: |
        1. Ejecutar `pnpm migration:generate`
        2. Ejecutar `pnpm migration:run`
        3. Observar el error de foreign key constraint
    validations:
      required: true

  - type: textarea
    id: expected-behavior
    attributes:
      label: Comportamiento esperado
      description: |
        ¬øQu√© esperabas que ocurriera?
      placeholder: |
        La migraci√≥n deber√≠a ejecutarse exitosamente creando las tablas
        y relaciones sin errores de constraints.
    validations:
      required: true
